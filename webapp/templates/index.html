{% extends 'base.html'%}
{% block head %}
<link rel="stylesheet" href="{{ url_for('static',filename='node_modules/cropper/dist/cropper.css') }}">
<script src="{{ url_for('static',filename='node_modules/cropperjs/dist/cropper.js') }}"></script>
<script src="{{ url_for('static',filename='node_modules/jquery/dist/jquery.js') }}"></script>
<script src="{{ url_for('static',filename='js/main.js') }}" defer></script>
{% endblock %}

{% block content %}
<div class="card">
	<div class="card-body">
		<h2>Upload Image</h2>
		<div id="alert-box"></div>
		<div id="image-box" class="mb-3"></div>
		<div id="image-form" class="custom-file">
			<input id="id_file" type="file" name="image" class="custom-file-input">
			<label class="custom-file-label" for="id_file">Upload Image</label>
		</div>
		<button id="confirm-btn" class="btn btn-primary mt-3 not-visible">Next (Upload file)</button>

		<h2>Select Target Pose</h2>
		<div id="canvasBox" class="row hiddenradio">
			{% for pose in poses %}
			<div class="inputPoseContainer col-xl-2 col-md-4 col-6">
				<label class="img-label">
					<input type="radio" name="inputPose" value="{{ loop.index0 }}">
					<canvas data-pose="{{ pose|tojson }}" id="pose{{ loop.index0 }}" style="border: 1px solid #000"></canvas>
				</label>
			</div>
			{% endfor %}
		</div>
		<button class="btn btn-primary mt-3">Transform image</button>
		{% if output_image %}
		<div class="row">
			<div class="col-7">
				<h2>Output Image</h2>
				<div class="scan">
					<img class="img-fluid" id="inputImage" src="{{ output_image }}" />
					<canvas id="resultsCanvas"></canvas>
				</div>
			</div>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}